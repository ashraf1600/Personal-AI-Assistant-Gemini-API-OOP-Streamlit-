# ЁЯза JARVIS AI Assistant: рж╕ржорзНржкрзВрж░рзНржг ржкрзНрж░ржЬрзЗржХрзНржЯрзЗрж░ ржмрзНржпрж╛ржЦрзНржпрж╛ (ржмрж╛ржВрж▓рж╛ржпрж╝)

рж╣рзНржпрж╛рж▓рзЛ! ржЖржЬ ржЖржорж┐ рждрзЛржорж╛ржжрзЗрж░ рж╢рж┐ржХрзНрж╖ржХрзЗрж░ ржорждрзЛ ржХрж░рзЗ ржПржЗ ржкрзБрж░рзЛ ржкрзНрж░ржЬрзЗржХрзНржЯржЯрж╛ ржмрзБржЭрж┐рзЯрзЗ ржжрзЗржмред ржЖржорж░рж╛ ржжрзЗржЦржм ржХрзАржнрж╛ржмрзЗ **Python**, **Streamlit**, ржПржмржВ **Google Gemini API** ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржПржХржЯрж╛ рж╕рзНржорж╛рж░рзНржЯ AI ржЕрзНржпрж╛рж╕рж┐рж╕рзНржЯрзНржпрж╛ржирзНржЯ ржмрж╛ржирж╛ржирзЛ рж╣рзЯрзЗржЫрзЗред

ржПржЗ ржкрзНрж░ржЬрзЗржХрзНржЯржЯрж╛ **Object-Oriented Programming (OOP)** ржХржирж╕рзЗржкрзНржЯ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ рждрзИрж░рж┐ ржХрж░рж╛ред ржЕрж░рзНржерж╛рзО, ржЖржорж░рж╛ ржХрзЛржбржЧрзБрж▓рзЛржХрзЗ ржЫрзЛржЯ ржЫрзЛржЯ рж▓ржЬрж┐ржХрзНржпрж╛рж▓ ржнрж╛ржЧрзЗ (Class) ржнрж╛ржЧ ржХрж░рзЗ ржирж┐рзЯрзЗржЫрж┐ ржпрж╛рждрзЗ ржорзНржпрж╛ржирзЗржЬ ржХрж░рж╛ рж╕рж╣ржЬ рж╣рзЯред

---

## ЁЯПЧя╕П ржорзВрж▓ ржХржирж╕рзЗржкрзНржЯрж╕ (Main Concepts)

ржкрзНрж░ржЬрзЗржХрзНржЯрзЗ ржврзЛржХрж╛рж░ ржЖржЧрзЗ ржХрзЯрзЗржХржЯрж╛ ржЬрж┐ржирж┐рж╕ ржмрзБржЭрзЗ ржирж┐ржЗ:

1.  **Streamlit**: ржПржЯрж╛ ржЖржорж╛ржжрзЗрж░ ржЕрзНржпрж╛ржкрзЗрж░ **ржЪрзЗрж╣рж╛рж░рж╛ (Frontend)**ред ржЖржорж░рж╛ ржпрзЗ ржмрж╛ржЯржи, ржЪрзНржпрж╛ржЯржмржХрзНрж╕, ржЖрж░ рж╕рж╛ржЗржбржмрж╛рж░ ржжрзЗржЦржЫрж┐, рж╕ржм ржПржЯрж╛ ржжрж┐рзЯрзЗ рждрзИрж░рж┐ред
2.  **Gemini API**: ржПржЯрж╛ рж╣рж▓рзЛ ржЖржорж╛ржжрзЗрж░ ржЕрзНржпрж╛ржкрзЗрж░ **ржорж╕рзНрждрж┐рж╖рзНржХ (Brain)**ред ржПржЯрж╛ Google-ржПрж░ ржПржХржЯрж╛ рж╢ржХрзНрждрж┐рж╢рж╛рж▓рзА AI ржоржбрзЗрж▓, ржпрж╛ ржЖржорж╛ржжрзЗрж░ ржкрзНрж░рж╢рзНржирзЗрж░ ржЙрждрзНрждрж░ ржжрзЗрзЯред
3.  **OOP (Object-Oriented Programming)**: ржПржЯрж╛ ржХрзЛржб рж▓рзЗржЦрж╛рж░ ржПржХржЯрж╛ рж╕рзНржЯрж╛ржЗрж▓ред ржПржЦрж╛ржирзЗ ржЖржорж░рж╛ `Class` ржЖрж░ `Object` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж┐ред ржпрзЗржоржи:
    *   `Memory` ржХрзНрж▓рж╛рж╕ рж╢рзБржзрзБ ржХржерж╛ржмрж╛рж░рзНрждрж╛ ржоржирзЗ рж░ржЦрж╛рж░ ржХрж╛ржЬ ржХрж░ржмрзЗред
    *   `GeminiEngine` ржХрзНрж▓рж╛рж╕ рж╢рзБржзрзБ ржЧрзБржЧрж▓рзЗрж░ рж╕рж╛ржерзЗ ржХржерж╛ ржмрж▓рж╛рж░ ржХрж╛ржЬ ржХрж░ржмрзЗред
    *   ржПрждрзЗ ржХрж░рзЗ ржХрзЛржб рж╣ржЬржмрж░рж▓ рж╣рзЯ ржирж╛ред

---

## ЁЯУВ ржХрзЛржб рж╕рзНржЯрзНрж░рж╛ржХржЪрж╛рж░ (Code Structure)

ржЖржорж╛ржжрзЗрж░ ржкрзБрж░рзЛ ржкрзНрж░ржЬрзЗржХрзНржЯржЯрж╛ ржХрзЯрзЗржХржЯрж╛ ржлрж╛ржЗрж▓рзЗ ржнрж╛ржЧ ржХрж░рж╛:

1.  `config/settings.py`: ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи ржУ рж╕рзЗржЯрж┐ржВрж╕ред
2.  `jarvis/gemini_engine.py`: ржЧрзБржЧрж▓рзЗрж░ рж╕рж╛ржерзЗ ржпрзЛржЧрж╛ржпрзЛржЧрзЗрж░ ржмрзНржпржмрж╕рзНржерж╛ред
3.  `jarvis/memory.py`: ржорзЗржорзЛрж░рж┐ ржмрж╛ рж╕рзНржорзГрждрж┐рж╢ржХрзНрждрж┐ред
4.  `jarvis/prompt_controller.py`: ржЬрж╛рж░ржнрж┐рж╕рзЗрж░ ржмрзНржпржХрзНрждрж┐рждрзНржм ржмрж╛ ржкрж╛рж░рзНрж╕рзЛржирж╛рж▓рж┐ржЯрж┐ред
5.  `jarvis/assistant.py`: ржорзЗржЗржи ржорзНржпрж╛ржирзЗржЬрж╛рж░, ржпрзЗ рж╕ржмрж╛ржЗржХрзЗ ржирж┐рзЯржирзНрждрзНрж░ржг ржХрж░рзЗред
6.  `app.py`: ржорзЗржЗржи ржЕрзНржпрж╛ржк ржмрж╛ ржЗржЙржЬрж╛рж░ ржЗржирзНржЯрж╛рж░ржлрзЗрж╕ред

ржПржЦржи ржЪрж▓рзЛ ржПржХрзЗ ржПржХрзЗ рж╕ржм ржжрзЗржЦрж┐ред

---

### рзз. рж╕рзЗржЯрж┐ржВ ржПржмржВ ржЪрж╛ржмрж┐ржХрж╛ржарж┐ ЁЯФС (`config/settings.py`)

рж╕ржмрзБрж░ рж╢рзБрж░рзБрждрзЗ ржЖржорж╛ржжрзЗрж░ ржХрж┐ржЫрзБ ржЧрзЛржкржирзАрзЯ рждржерзНржп (ржпрзЗржоржи API Key) рж╕рж╛ржорж▓рж╛рждрзЗ рж╣рзЯред ржПржЯрж╛ ржХрж░рзЗ `Settings` ржХрзНрж▓рж╛рж╕ред

**ржХрж╛ржЬ:**
*   `.env` ржлрж╛ржЗрж▓ ржерзЗржХрзЗ `GEMINI_API_KEY` ржмрзЗрж░ ржХрж░рзЗ ржЖржирж╛ред
*   ржЪрж╛ржмрж┐ ржарж┐ржХржарж╛ржХ ржЖржЫрзЗ ржХрж┐ржирж╛ рж╕рзЗржЯрж╛ ржЪрзЗржХ ржХрж░рж╛ред

```python
class Settings:
    def __init__(self):
        # .env ржлрж╛ржЗрж▓ рж▓рзЛржб ржХрж░рж╛
        load_dotenv()
        
    def load_api_key(self):
        # API Key ржЦрзБржБржЬрзЗ ржмрзЗрж░ ржХрж░рж╛
        key = os.getenv("GEMINI_API_KEY")
        if not key:
            raise ValueError("ржЪрж╛ржмрж┐ ржкрж╛ржУрзЯрж╛ ржпрж╛рзЯржирж┐!")
        return key
```

---

### рзи. ржоржЧржЬ ЁЯза (`jarvis/gemini_engine.py`)

ржПржЦрж╛ржирзЗ `GeminiEngine` ржХрзНрж▓рж╛рж╕ ржерж╛ржХрзЗред ржПрж░ ржХрж╛ржЬ рж╣рж▓рзЛ ржЖржорж╛ржжрзЗрж░ ржкрзНрж░рж╢рзНржиржЯрж╛ Google-ржПрж░ ржХрж╛ржЫрзЗ ржкрж╛ржарж╛ржирзЛ ржПржмржВ ржЙрждрзНрждрж░ ржирж┐рзЯрзЗ ржЖрж╕рж╛ред

**ржХрж╛ржЬ:**
*   API Key ржжрж┐рзЯрзЗ ржХрж╛ржирзЗржХрж╢ржи рждрзИрж░рж┐ ржХрж░рж╛ (`_configure_api`)ред
*   ржоржбрзЗрж▓ рждрзИрж░рж┐ ржХрж░рж╛ (`_initialize_model`)ред ржЖржорж░рж╛ ржПржЦрж╛ржирзЗ `gemini-flash-latest` ржмрж╛ ржЕржирзНржп ржоржбрзЗрж▓ ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржЫрж┐ред
*   `generate()` ржлрж╛ржВрж╢ржи ржжрж┐рзЯрзЗ ржЙрждрзНрждрж░ рждрзИрж░рж┐ ржХрж░рж╛ред

```python
class GeminiEngine:
    def generate(self, prompt):
        # рж╕рзЛржЬрж╛ ржЧрзБржЧрж▓рзЗрж░ ржХрж╛ржЫрзЗ ржкрзНрж░рж╢рзНржи ржкрж╛ржарж╛ржирзЛ
        response = self.model.generate_content(prompt)
        return response.text
```

---

### рзй. рж╕рзНржорзГрждрж┐рж╢ржХрзНрждрж┐ ЁЯТ╛ (`jarvis/memory.py`)

ржорж╛ржирзБрж╖рзЗрж░ ржорждрзЛ AI-ржПрж░ржУ ржоржирзЗ рж░рж╛ржЦрж╛ ржжрж░ржХрж╛рж░ ржЖржЧрзЗ ржХрзА ржХржерж╛ рж╣рзЯрзЗржЫрзЗред ржиржЗрж▓рзЗ рж╕рзЗ ржЦрзЗржЗ рж╣рж╛рж░рж┐рзЯрзЗ ржлрзЗрж▓ржмрзЗред `Memory` ржХрзНрж▓рж╛рж╕ ржПржЗ ржХрж╛ржЬржЯрж╛ ржХрж░рзЗ `conversation_history.json` ржлрж╛ржЗрж▓рзЗ рж╕рзЗржн ржХрж░рзЗ рж░рзЗржЦрзЗред

**ржХрж╛ржЬ:**
*   `add()`: ржирждрзБржи ржорзЗрж╕рзЗржЬ рж▓рж┐рж╕рзНржЯрзЗ ржпрзЛржЧ ржХрж░рж╛ред
*   `get_context_for_prompt()`: ржЖржЧрзЗрж░ ржХржерж╛ржЧрзБрж▓рзЛ рж╕рзБржирзНржжрж░ ржХрж░рзЗ рж╕рж╛ржЬрж┐рзЯрзЗ AI-ржХрзЗ ржжрзЗржУрзЯрж╛, ржпрж╛рждрзЗ рж╕рзЗ ржкрзНрж░рж╕ржЩрзНржЧ ржмрзБржЭрждрзЗ ржкрж╛рж░рзЗред
*   `save_to_file()`: рж╣рж╛рж░рзНржбржбрж┐рж╕рзНржХрзЗ рж╕рзЗржн ржХрж░рзЗ рж░рж╛ржЦрж╛ред

```python
class Memory:
    def add(self, role, message):
        # ржирждрзБржи ржХржерж╛ ржоржирзЗ рж░рж╛ржЦрж╛
        self.conversation.append({'role': role, 'message': message})
        self._save_to_file()
```

---

### рзк. ржмрзНржпржХрзНрждрж┐рждрзНржм ржмрж╛ ржЪрж░рж┐рждрзНрж░ ЁЯОн (`jarvis/prompt_controller.py`)

ржЬрж╛рж░ржнрж┐рж╕ ржХржЦржи ржХрзА рж░рзЛрж▓рзЗ ржХржерж╛ ржмрж▓ржмрзЗ (ржпрзЗржоржи: рж╢рж┐ржХрзНрж╖ржХ, ржХрзЛржбрж╛рж░, ржирж╛ржХрж┐ рж╕рж╛ржзрж╛рж░ржг ржмржирзНржзрзБ), рж╕рзЗржЯрж╛ ржарж┐ржХ ржХрж░рзЗ `PromptController`ред

**ржХрж╛ржЬ:**
*   ржЖрж▓рж╛ржжрж╛ ржЖрж▓рж╛ржжрж╛ рж░рзЛрж▓рзЗрж░ ржЬржирзНржп ржЖрж▓рж╛ржжрж╛ "System Prompt" (ржЧрзЛржкржи ржирж┐рж░рзНржжрзЗрж╢) рж░рж╛ржЦрж╛ред
*   ржпрзЗржоржи **Coder** ржорзЛржбрзЗ рждрж╛ржХрзЗ ржмрж▓рж╛ ржЖржЫрзЗ: "рждрзБржорж┐ рж╢рзБржзрзБ ржХрзЛржб ржирж┐рзЯрзЗ ржХржерж╛ ржмрж▓ржмрзЗ ржПржмржВ рж╕ржм ржмрзБржЭрж┐рзЯрзЗ ржжрзЗржмрзЗред"
*   `build_prompt()`: ржЗржЙржЬрж╛рж░рзЗрж░ ржкрзНрж░рж╢рзНржирзЗрж░ рж╕рж╛ржерзЗ ржЖржЧрзЗрж░ рж╕рзНржорзГрждрж┐ ржЖрж░ ржЧрзЛржкржи ржирж┐рж░рзНржжрзЗрж╢ ржорж┐рж╢рж┐рзЯрзЗ ржПржХржЯрж╛ ржмрзЬ ржкрзНрж░ржорзНржкржЯ рждрзИрж░рж┐ ржХрж░рж╛ред

```python
ROLES = {
    "coder": {
        "system_prompt": "рждрзБржорж┐ ржПржХржЬржи ржПржХрзНрж╕ржкрж╛рж░рзНржЯ ржкрзНрж░рзЛржЧрзНрж░рж╛ржорж╛рж░ред ржХрзЛржб ржмрзБржЭрж┐рзЯрзЗ ржжрж╛ржУред"
    },
    "tutor": {
        "system_prompt": "рждрзБржорж┐ ржПржХржЬржи рж╢рж┐ржХрзНрж╖ржХред рж╕рж╣ржЬ ржХрж░рзЗ ржмрзБржЭрж┐рзЯрзЗ ржжрж╛ржУред"
    }
}
```

---

### рзл. ржорзНржпрж╛ржирзЗржЬрж╛рж░ ржмрж╛ рж╕рж░рзНржжрж╛рж░ ЁЯСФ (`jarvis/assistant.py`)

ржЗржирж┐ рж╣рж▓рзЗржи `JarvisAssistant`ред ржЗржирж┐ ржУржкрж░рзЗрж░ рж╕ржмрж╛ржЗржХрзЗ (Engine, Memory, Prompt) ржПржХрж╕рж╛ржерзЗ ржЬрзЛрзЬрж╛ рж▓рж╛ржЧрж╛ржиред

**ржХрж╛ржЬ:**
*   ржпржЦржи ржЕрзНржпрж╛ржк ржерзЗржХрзЗ `respond()` ржХрж▓ ржХрж░рж╛ рж╣рзЯ:
    1.  рж╕рзЗ `PromptController` ржерзЗржХрзЗ ржкрзНрж░ржорзНржкржЯ ржмрж╛ржирж╛рзЯред
    2.  рж╕рзЗржЯрж╛ `GeminiEngine`-ржП ржкрж╛ржарж╛рзЯред
    3.  ржЙрждрзНрждрж░ ржПрж▓рзЗ рж╕рзЗржЯрж╛ `Memory`-рждрзЗ рж╕рзЗржн ржХрж░рзЗред
    4.  рж╢рзЗрж╖рзЗ ржЙрждрзНрждрж░ржЯрж╛ ржлрзЗрж░ржд ржжрзЗрзЯред

ржПржХрзЗ ржмрж▓рзЗ **Facade Pattern** - ржкрзЗржЫржирзЗрж░ рж╕ржм ржЬржЯрж┐рж▓рждрж╛ рж▓рзБржХрж┐рзЯрзЗ рж╕рж╛ржоржирзЗ ржПржХржЯрж╛ рж╕рж╣ржЬ ржЗржирзНржЯрж╛рж░ржлрзЗрж╕ ржжрзЗржУрзЯрж╛ред

---

### рзм. ржЕрзНржпрж╛ржкрзЗрж░ ржЪрзЗрж╣рж╛рж░рж╛ ЁЯЦея╕П (`app.py`)

ржПржЯрж╛ ржЖржорж╛ржжрзЗрж░ **Streamlit** ржЕрзНржпрж╛ржкред ржПржЦрж╛ржирзЗ ржЖржорж░рж╛ ржХрзЛржб рж▓рж┐ржЦрж┐ ржирж╛, ржмрж░ржВ UI ржмрж╛ржирж╛ржЗред

**ржзрж╛ржкржЧрзБрж▓рзЛ:**
1.  **CSS рж╕рзНржЯрж╛ржЗрж▓рж┐ржВ**: ржЖржорж░рж╛ `st.markdown` ржжрж┐рзЯрзЗ рж╕рзБржирзНржжрж░ **CSS** ржбрж┐ржЬрж╛ржЗржи ржжрж┐рзЯрзЗржЫрж┐ ржпрж╛рждрзЗ ржЕрзНржпрж╛ржкржЯрж╛ ржкрзНрж░ржлрзЗрж╢ржирж╛рж▓ рж▓рж╛ржЧрзЗ (ржХрж╛рж▓рзЛ ржмрзНржпрж╛ржХржЧрзНрж░рж╛ржЙржирзНржб, ржирзАрж▓ ржмрж╛рждрж┐)ред
2.  **ржЗ╨╜╨╕╤Ж╨╕╨░рж▓рж╛ржЗржЬрзЗрж╢ржи**: ржЕрзНржпрж╛ржк ржЪрж╛рж▓рзБ рж╣рж▓рзЗ `JarvisAssistant` рждрзИрж░рж┐ ржХрж░рж╛ рж╣рзЯред
3.  **рж╕рж╛ржЗржбржмрж╛рж░ (`display_sidebar`)**: ржПржЦрж╛ржирзЗ ржорзЛржб ржкрж░рж┐ржмрж░рзНрждржи (Coder/Tutor) ржЖрж░ рж╣рж┐рж╕рзНржЯрзНрж░рж┐ ржХрзНрж▓рж┐рзЯрж╛рж░ ржХрж░рж╛рж░ ржЕржкрж╢ржи ржерж╛ржХрзЗред
4.  **ржЪрзНржпрж╛ржЯ ржЗржирзНржЯрж╛рж░ржлрзЗрж╕ (`display_chat_interface`)**:
    *   ржЖржЧрзЗрж░ рж╕ржм ржорзЗрж╕рзЗржЬ `st.session_state` ржерзЗржХрзЗ ржирж┐рзЯрзЗ ржжрзЗржЦрж╛ржирзЛ рж╣рзЯред
    *   `st.chat_input` ржжрж┐рзЯрзЗ ржЗржЙржЬрж╛рж░рзЗрж░ ржкрзНрж░рж╢рзНржи ржирзЗржУрзЯрж╛ рж╣рзЯред
    *   ржкрзНрж░рж╢рзНржи ржкрзЗрж▓рзЗ `assistant.respond()` ржХрж▓ ржХрж░рзЗ ржЙрждрзНрждрж░ ржжрзЗржЦрж╛ржирзЛ рж╣рзЯред

```python
def main():
    # рж╕ржм рж╕рзЗржЯржЖржк ржХрж░рж╛
    initialize_session_state()
    
    # рж╕рж╛ржЗржбржмрж╛рж░ ржжрзЗржЦрж╛ржирзЛ
    display_sidebar()
    
    # ржЪрзНржпрж╛ржЯржмржХрзНрж╕ ржжрзЗржЦрж╛ржирзЛ
    display_chat_interface()
```

---

## ЁЯОп рж╕рж╛рж░рж╕ржВржХрзНрж╖рзЗржк (Summary)

ржПржЗ ржкрзНрж░ржЬрзЗржХрзНржЯржЯрж╛ ржПржХржЯрж╛ ржХрзНрж▓рж╛рж╕рж┐ржХ **OOP** ржЙржжрж╛рж╣рж░ржгред
1.  **Settings** ржЪрж╛ржмрж┐ ржЖржирзЗред
2.  **Engine** ржЧрж╛рзЬрж┐ ржЪрж╛рж▓рж╛рзЯ (AI)ред
3.  **Memory** рж░рж╛рж╕рзНрждрж╛ ржоржирзЗ рж░рж╛ржЦрзЗред
4.  **PromptController** ржбрзНрж░рж╛ржЗржнрж╛рж░рзЗрж░ ржорзБржб ржарж┐ржХ ржХрж░рзЗред
5.  **Assistant** ржЧрж╛рзЬрж┐ржЯрж╛ ржорзНржпрж╛ржирзЗржЬ ржХрж░рзЗред
6.  **App.py** рж╣рж▓рзЛ ржЧрж╛рзЬрж┐рж░ ржбрзНржпрж╛рж╢ржмрзЛрж░рзНржб ржпрж╛ рждрзБржорж┐ ржжрзЗржЦржЫред

ржЖрж╢рж╛ ржХрж░рж┐ ржПржЦржи ржкрзБрж░рзЛ ржХрзЛржбржЯрж╛ ржкрж╛ржирж┐рж░ ржорждрзЛ ржкрж░рж┐рж╖рзНржХрж╛рж░! ржХрзЛржирзЛ ржкрзНрж░рж╢рзНржи ржерж╛ржХрж▓рзЗ ржХрж░рждрзЗ ржкрж╛рж░рзЛред ЁЯШК
